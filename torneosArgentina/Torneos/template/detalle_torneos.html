{% extends "base.html" %}
{% load static %}

{% block title %}Detalles de {{ torneo.nombre }}{% endblock %}

{% block content %}

<div class="torneo-detail-container">
    <h2>{{ torneo.nombre }}</h2>

    {% if torneo.imagen_torneo %}
    <img src="{{ torneo.imagen_torneo.url }}" alt="Imagen de {{ torneo.nombre }}" class="torneo-detail-image">
    {% endif %}

    <div class="detail-info-block">
        <p><strong>Tipo:</strong> {{ torneo.tipo }}</p>
        <p><strong>Ubicación General:</strong> {{ torneo.ubicacion }}</p>
        {% if torneo.internacional %}
        <p style="color: #e67e22;"><strong>(Torneo Internacional)</strong></p>
        {% endif %}
        {% if torneo.descripcion %}
        <p><strong>Descripción:</strong> {{ torneo.descripcion|linebreaksbr }}</p>
        {% endif %}
    </div>

    <div class="ediciones-container">
        <h3>Ediciones Anuales</h3>
        {% if torneo.informacion_por_anio.all %}
        {% for info_anio in torneo.informacion_por_anio.all %}
        <div class="edicion-card">
            <h4>Año: {{ info_anio.anio }}</h4>
            {% if info_anio.fecha_exacta %}<p><strong>Fecha:</strong> {{ info_anio.fecha_exacta|date:"d M Y" }}</p>{%
            endif %}
            {% if info_anio.ubicacion_especifica %}<p><strong>Ubicación:</strong> {{ info_anio.ubicacion_especifica }}
            </p>{% endif %}
            <p><strong>Campeón:</strong> {{ info_anio.campeon }}</p>
            {% if info_anio.subcampeon %}<p><strong>Subcampeón:</strong> {{ info_anio.subcampeon }}</p>{% endif %}
            {% if info_anio.participantes_cantidad %}<p><strong>Participantes:</strong> {{
                info_anio.participantes_cantidad }}</p>{% endif %}
            {% if info_anio.resumen %}<p><strong>Resumen:</strong> {{ info_anio.resumen|linebreaksbr }}</p>{% endif %}

            {% if info_anio.link_transmision %}
            <a href="{{ info_anio.link_transmision }}" target="_blank" rel="noopener noreferrer"
                class="link-transmision">
                Ver Transmisión
            </a>
            {% endif %}
        </div>
        {% endfor %}
        {% else %}
        <p>No hay información de ediciones anuales disponible para este torneo aún.</p>
        {% endif %}
    </div>

    <a href="{% url 'lista_torneos' %}" class="btn-back">Volver a la Lista de Torneos</a>
</div>
{% endblock %}